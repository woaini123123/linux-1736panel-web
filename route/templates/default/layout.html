<!DOCTYPE html>
<html>

<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="renderer" content="webkit">
<title>{{data['title']}}</title>
<link rel="shortcut icon" href="/static/favicon.ico" type="image/x-icon" />
<link href="/static/bootstrap-3.3.5/css/bootstrap.min.css?v={{config.version}}" rel="stylesheet">
<link href="/static/css/site.css?v={{config.version}}" rel="stylesheet">
<link href="/static/codemirror/lib/codemirror.css?v={{config.version}}" rel="stylesheet">
<script src="/static/language/Simplified_Chinese/lan.js?v={{config.version}}"></script>
<!--[if lte IE 9]>
	<script src="/static/js/requestAnimationFrame.js"></script>
<![endif]-->
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-FC74BB2RGD');
</script>


{% for menu in data['hook_menu'] %}
{% if menu['css_path'] and data['hook_tag'] == menu['name'] %}
<!-- 加载插件css -->
<link href="/plugins/file?name={{menu['name']}}&v={{config.version}}&f={{menu['css_path']}}" rel="stylesheet" />
{% endif %}
{% endfor %}

<!-- 全局静态HOOK -->
{% for menu in data['hook_global_static'] %}
{% if menu['css_path'] %}
<link href="/plugins/file?name={{menu['name']}}&v={{config.version}}&f={{menu['css_path']}}" rel="stylesheet" />
{% endif %}
{% endfor %}
<style>
    .ad-container {
        display: flex;
        flex-wrap: wrap;
        width: 100%;
        margin: 2px -2px;
        box-sizing: border-box;
        margin-bottom: 2px;
    }

    .ad-column {
        width: calc(20% - 4px);
        margin: 0 2px;
        padding: 1px;
        background-color: lightgray;
        text-align: center;
        box-sizing: border-box;
    }
    .ad-column > img {
        width: 100%;
        height: 100%;
    }
    .ssh-item-layout {
        margin-left: 6px;
        display: inline-block;
		vertical-align: middle;
    }
    .ssh-item-layout label {
        margin-bottom: 2px;
    }
</style>
</head>

<body>
    <div class="bt-warp bge6">
        <div id="container" class="container-fluid">
            <div class="sidebar-scroll">
                <div class="sidebar-auto">
                    <div id="task" class="task cw" onclick="messageBox();"></div>
                    <h3 class="mypcip"><span class="f14 cw">{{data['ip']}}</span></h3>
                    <ul class="menu">
                        <li id="memuA"><a class="menu_home" href="/">首页</a></li>
                        <li id="memuAsite"><a class="menu_web" href="/site">网站</a></li>
                        <li id="memuAplugins_pureftp"><a class="menu_ftp" href="/plugins/menu?tag=pureftp">FTP</a></li>
                        <li id="memuAplugins_mysql"><a class="menu_data" href="/plugins/menu?tag=mysql">MYSQL</a></li>
                        <li id="memuAgeneva">
                            <a class="menu_firewall" href="/geneva">移动墙
                                <div class='ssh-item-layout' id="firewall_status">
                                    <input class='btswitch btswitch-ios' id='firewall_status' type='checkbox' disabled><label class='btswitch-btn sshswitch' for='firewall_status' ></label>
                                </div>
                            </a>
                        </li>
                        <li id="memuAdns"><a class="menu_web" href="/dns">DNS</a></li>
                        <li id="memuAbt"><a class="menu_set" href="/bt">导入宝塔</a></li>
                        <li id="memuAcontrol"><a class="menu_control" href="/control">监控</a></li>
                        <li id="memuAfirewall"><a class="menu_firewall" href="/firewall">安全</a></li>
                        <li id="memuAplugins_op_waf"><a class="menu_firewall" href="/plugins/menu?tag=op_waf">OP防火墙</a></li>
                        <li id="memuAfiles"><a class="menu_folder" href="/files">文件</a></li>
                        <li id="memuAlogs"><a class="menu_logs" href="/logs">日志</a></li>                        
                        <li id="memuAcrontab"><a class="menu_day" href="/crontab">计划任务</a></li>
                        <!-- 插件设置的菜单 -->
                        {% for menu in data['hook_menu'] %}
                        {% if menu['name'] not in ['op_waf', 'pureftp', 'mysql', 'mysql-yum', 'mysql-apt'] %}
                        <li id="memuAplugins_{{menu['name']}}">
                            <a class="menu_plugin_{{menu['name']}}" href="/plugins/menu?tag={{menu['name']}}">{{menu['title']}}</a>
                        </li>
                        {% endif %}
                        {% endfor %}
                        <li id="memuAsoft"><a class="menu_soft" href="/soft">软件管理</a><span class="softnum">1</span></li>
                        <li id="memuAconfig"><a class="menu_set" href="/config">面板设置</a></li>
                        <li><a class="menu_exit" href="javascript:;" id="signout">退出</a></li>
                    </ul>
                    <div id="newbtpc"></div>
                    <div class="btpc-plus" onclick="bindPanel(0,'b')">+</div>
                </div>
            </div>
            <button style="display: none;" id="mw_copys" class="mw_copy" data-clipboard-text=""></button>
            <link rel="stylesheet" href="/static/build/xterm.css?v={{config.version}}">
            <link rel="stylesheet" href="/static/build/addons/fullscreen/fullscreen.css?v={{config.version}}">
            <script src="/static/js/jquery-1.10.2.min.js"></script>
            <script src="/static/js/bootstrap.min.js"></script>
            <script src="/static/layer/layer.js"></script>
            <script src="/static/js/jquery.fly.min.js"></script>
            <script src="/static/js/clipboard.min.js"></script>
            <script src="/static/build/xterm.js"></script>
            <script src="/static/build/addons/attach/attach.js"></script>
            <script src="/static/build/addons/fit/fit.js"></script>
            <script src="/static/build/addons/fullscreen/fullscreen.js"></script>
            <script src="/static/js/socket.io.min.js"></script>
            <script src="/static/build/addons/winptyCompat/winptyCompat.js"></script>
            <script src="/static/js/term-websocketio.js"></script>
            <script src="/static/app/upload.js?v={{config.version}}"></script>
            <script src="/static/app/public.js?v={{config.version}}"></script>
            <script src="/static/js/echarts.min.js"></script>

            
            <script src="/static/js/jquery.dragsort-0.5.2.min.js"></script>
            <script src="/static/js/jquery-qrcode-0.18.0.min.js?v={{config.version}}"></script>
            <script src="/static/js/xm-select.js"></script>
            <script src="/static/app/soft.js?v={{config.version}}" type="text/javascript" ></script>
            <div style="margin-left: 180px;" id="ads">
                <div>
                    <div id="ad-imgs"></div>
                    <div style="text-align: center;"><a href="#" onclick="closeAds()">关闭所有广告</a></div>
                </div>
            </div>
            {% block content %}{% endblock %}
            <div class="footer bgw">1736建站面板-史上最强大的免费面板</span>
            </div>
        </div>
    </div>
</body>

<script type="text/javascript">

setInterval(function(){
	getStatus();
}, 1000);

function getStatus() {
	$.post('/geneva/get_status', function(data){
        var fStatus = '';
		if (data.status){
			fStatus = "<input class='btswitch btswitch-ios' id='firewall_status' type='checkbox' checked disabled><label class='btswitch-btn' for='firewall_status'></label>";
		}else{
			fStatus = "<input class='btswitch btswitch-ios' id='firewall_status' type='checkbox' disabled><label class='btswitch-btn' for='firewall_status'></label>";
		}
		$("#firewall_status").html(fStatus);
	},'json');
}

// 1736 statistic
var url_1736="https://uv60.cn";var token="c2e7831dd2d1e173cd03c12c6621d3c3f876f1de4374a2da453f4d8738d43640e13daa5e15206b93fe01e0ad965cbca36f539863b4c4225cc48ad2d7526dde2f";var cltj = document.createElement("script");cltj.src = url_1736 + "/tj/tongji.js?v=2.08";var s = document.getElementsByTagName("script")[0];s.parentNode.insertBefore(cltj,s);

function closeAds(){
    $("#ads").hide();
}

(function ($) {
    $.getUrlParam = function (name) {
        var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)");
        var r = window.location.search.substr(1).match(reg);
        if (r != null) return unescape(r[2]); return null;
    }
})(jQuery);

function showAd(){
    layer.open({
        type: 1
        ,title: "【AD】求恰饭"
        ,closeBtn: 1
        ,area: '300px;'
        ,shade: 0.8
        ,id: 'panel_ad_list_mode'
        ,btnAlign: 'c'
        ,moveType: 1
        ,content: '<div style="padding: 10px; line-height: 22px; font-weight: 300;">\
                <table class="table table-hover">\
                    <thead><tr><td style="text-align: center;">商家</td><td style="text-align: center;">优惠码</td><tr></thead>\
                    <tbody>\
                        <tr><td><a target="_blank" href="https://digitalvirt.com/aff.php?aff=154"><img src="https://digitalvirt.com/templates/BlueWhite/img/logo-dark.svg"/></a></td><td>mdserver-web</td></tr>\
                    </tbody>\
                </table>\
        </div>'
        ,success: function(layero){
        }
    });
}

$('.panel_ad_list_mode').click(function(){
    showAd();
});


function getUrlPath(){
    var thisUrl = window.location.href;
    var pathArr = thisUrl.split('/');
    return pathArr[pathArr.length - 1];
}
var thisPath = getUrlPath();
if (thisPath.indexOf('?')>-1){
    var tag = $.getUrlParam('tag');
    if(tag != undefined){
        $('#memuAplugins_'+tag).css('background-color','#2c3138');
    } else {
        $('#memuA').css('background-color','#f2f2f2');
    }
} else{
    if(thisPath != undefined){
        $('#memuA'+thisPath).css('background-color','#2c3138');
    } else {
        $('#memuA').css('background-color','#f2f2f2');
    }
}

var PathIndex = [
  '', 'site', 'menu', 'geneva', 'dns',
  'bt', 'control', 'firewall', 'files', 'logs',
  'crontab', 'soft', 'config'
];
getAds();
function getAds() {
  var menuIndex = getAdIndex(thisPath);
  var adIndex = PathIndex.indexOf(menuIndex) + 1;
  var adImgs = [];
  var adLinks = [];
  for (var i = 1; i <= 10; i++) {
    var name = `gg/${adIndex}-${i}`
    adLinks.push(`https://img.bt1736.com/${name}`)
    adImgs.push(`http://23.224.167.180/${name}.gif`)
  }
  var div = $('<div>');
  for (var i = 0; i < adImgs.length; i++) {
    if (i % 5 == 0) {
        div = $('<div>');
        div.addClass('ad-container');
        $('#ad-imgs').append(div);
    }
    var a = $('<a>');
    a.attr('href', adLinks[i]);
    a.attr('target', '_blank');
    a.addClass('ad-column');
    var image = $('<img>');
    image.attr('src', adImgs[i]);
    a.append(image);
    div.append(a);
  }
}

function getAdIndex(path) {
    var match = path.match(/^[^?]+/);
    return match ? match[0] : '';
}
$(".bt-w-menu p").click(function() {
    $(this).addClass("bgw").siblings().removeClass("bgw");
});
</script>
<script src="/static/codemirror/lib/codemirror.js?v={{config.version}}"></script>
<script src="/static/codemirror/addon/edit/editAll.js?v={{config.version}}"></script>
<script src="/static/codemirror/mode/modeAll.js?v={{config.version}}"></script>
<script src="/static/codemirror/addon/dialog/dialog.js?v={{config.version}}"></script>
<script src="/static/codemirror/addon/search/search.js?v={{config.version}}"></script>
<script src="/static/codemirror/addon/scroll/annotatescrollbar.js?v={{config.version}}"></script>
<script src="/static/laydate/laydate.js?v={{config.version}}"></script>

{% for menu in data['hook_menu'] %}
{% if menu['js_path'] and data['hook_tag'] == menu['name'] %}
<script src="/plugins/file?name={{menu['name']}}&f={{menu['js_path']}}&v={{config.version}}"></script>
{% endif %}
{% endfor %}

<!-- 全局静态HOOK -->
{% for menu in data['hook_global_static'] %}
{% if menu['js_path'] %}
<script src="/plugins/file?name={{menu['name']}}&f={{menu['js_path']}}&v={{config.version}}"></script>
{% endif %}
{% endfor %}

</html>